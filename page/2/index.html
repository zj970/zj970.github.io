<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>落雪のBlog</title><meta name="author" content="zj970"><meta name="copyright" content="zj970"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="谢谢你在世界的角落找到我">
<meta property="og:type" content="website">
<meta property="og:title" content="落雪のBlog">
<meta property="og:url" content="https://www.serendipity.fit/page/2/index.html">
<meta property="og:site_name" content="落雪のBlog">
<meta property="og:description" content="谢谢你在世界的角落找到我">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zj970/resource/personal/avatar.jpg">
<meta property="article:author" content="zj970">
<meta property="article:tag" content="落雪">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/zj970/resource/personal/avatar.jpg"><link rel="shortcut icon" href="https://www.bing.com/images/search?view=detailV2&ccid=huHclsGl&id=7F919E2195F90B62626DC69F0CF880B354D6FB06&thid=OIP.huHclsGl94FVgLfjfHIv3AAAAA&mediaurl=https%3a%2f%2fth.bing.com%2fth%2fid%2fR.86e1dc96c1a5f7815580b7e37c722fdc%3frik%3dBvvWVLOA%252bAyfxg%26riu%3dhttp%253a%252f%252fbpic.588ku.com%252felement_pic%252f00%252f89%252f91%252f6556ee891156fc3.jpg%26ehk%3dzvfPzYh1t%252b9%252bgofVbZ1A0%252bGBk3KrrBMnzLkuaFWGIqA%253d%26risl%3d%26pid%3dImgRaw%26r%3d0&exph=260&expw=260&q=%e5%8d%9a%e5%ae%a2%e7%bd%91%e7%ab%99%e5%9b%be%e6%a0%87&simid=608046827163756575&FORM=IRPRST&ck=E0755331E72FB4731B7DD4195628F295&selectedIndex=7"><link rel="canonical" href="https://www.serendipity.fit/page/2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '落雪のBlog',
  isPost: false,
  isHome: true,
  isHighlightShrink: true,
  isToc: false,
  postUpdate: '2024-11-17 21:46:28'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/zj970/resource/personal/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-tags"></i><span> 标签</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/notes"><i class="fa-fw fas fa-tags"></i><span> 笔记</span></a></li><li><a class="site-page child" href="/tags/life"><i class="fa-fw fas fa-tags"></i><span> 人生</span></a></li><li><a class="site-page child" href="/tags/originality"><i class="fa-fw fas fa-tags"></i><span> 原创</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Android"><i class="fa-fw fas fa-folder-open"></i><span> Android</span></a></li><li><a class="site-page child" href="/categories/AndroidTV"><i class="fa-fw fas fa-folder-open"></i><span> AndroidTV</span></a></li><li><a class="site-page child" href="/categories/Framework"><i class="fa-fw fas fa-folder-open"></i><span> Framework</span></a></li><li><a class="site-page child" href="/categories/Unity"><i class="fa-fw fas fa-folder-open"></i><span> Unity</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background: linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347)"><nav id="nav"><span id="blog-info"><a href="/" title="落雪のBlog"><span class="site-name">落雪のBlog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-tags"></i><span> 标签</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/notes"><i class="fa-fw fas fa-tags"></i><span> 笔记</span></a></li><li><a class="site-page child" href="/tags/life"><i class="fa-fw fas fa-tags"></i><span> 人生</span></a></li><li><a class="site-page child" href="/tags/originality"><i class="fa-fw fas fa-tags"></i><span> 原创</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Android"><i class="fa-fw fas fa-folder-open"></i><span> Android</span></a></li><li><a class="site-page child" href="/categories/AndroidTV"><i class="fa-fw fas fa-folder-open"></i><span> AndroidTV</span></a></li><li><a class="site-page child" href="/categories/Framework"><i class="fa-fw fas fa-folder-open"></i><span> Framework</span></a></li><li><a class="site-page child" href="/categories/Unity"><i class="fa-fw fas fa-folder-open"></i><span> Unity</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">落雪のBlog</h1></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/12/13/Android-14-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8BPackageManagerService/" title="Android_14_源码分析之PackageManagerService">Android_14_源码分析之PackageManagerService</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-12-12T16:42:25.000Z" title="发表于 2023-12-13 00:42:25">2023-12-13</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-13T08:07:27.846Z" title="更新于 2024-08-13 16:07:27">2024-08-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="content">
前言
背负着过去的痛苦，夹杂着现实的烦恼，对人的心灵而言是无任何益处的





参考博客
wise丰
冬子

&emsp;&emsp;本文中的所有内容大部分来源于网络资料，如有侵权请联系本人修改或删除，请大家多多支持原创!非常感谢！
PackageManagerService&emsp;&emsp;PackageManagerService(PMS)主要是管理应用的安装，卸载，更新，解析以及权限。同ActivityManagerService,PMS也是由SystemService孵化而来。


启动与初始化
frameworks&#x2F;base&#x2F;services&#x2F;java&#x2F;com&#x2F;android&#x2F;server&#x2F;SystemServer.java

12345678910111213141516171819202122232425262728//line 1234// Start the package manager.if (!mRuntimeRestart) &#123;    FrameworkStatsLog. ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/12/13/Android-14-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8BActivityManagerService/" title="Android_14_源码分析之ActivityManagerService">Android_14_源码分析之ActivityManagerService</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-12-12T16:42:08.000Z" title="发表于 2023-12-13 00:42:08">2023-12-13</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-22T09:41:21.437Z" title="更新于 2024-01-22 17:41:21">2024-01-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="content">
前序
一个人知道自己为什么而活，便能忍受任何一种生活





参考博客
厚雪长坡-ActivityTaskManagerService解析
LeeDuo-深入理解ActivityManagerService
芒果蒲公英-Android14 AMS启动流程
anly_jun-探索Activity之启动Intent Flag和taksAffinity
menghaocheng-Android-AMS】ActivityManagerService启动分析
Sukai’s Blog

&emsp;&emsp;本文中的所有内容大部分来源于网络资料，如有侵权请联系本人修改或删除，请大家多多支持原创!非常感谢！
ActivityManagerService&emsp;&emsp;Android系统非常庞大、错综复杂，其底层是采用Linux作为基底，上层采用包含虚拟机的Java层以及Native层，通过系统调用(Syscall)连接系统的内核空间与用户空间。用户空间主要采用C++和Java代码，通过JNI技术打通用户空间的Java层和Native层(C&#x2F;C++)。Google官方提供了一 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/12/13/Android-14-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/" title="Android_14_源码分析之启动流程">Android_14_源码分析之启动流程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-12-12T16:39:12.000Z" title="发表于 2023-12-13 00:39:12">2023-12-13</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-10-02T18:37:33.964Z" title="更新于 2024-10-03 02:37:33">2024-10-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="content">


前序

&emsp;&emsp;时间从来不语，却回答了所有问题，岁月从来不言，却见证了所有努力，愿大家遇到困难时都能换乘机遇，踏歌而行时一往无前。
参考资料
Android Framework 开发揭秘

&emsp;&emsp;本文中的所有内容大部分来源于网络资料，如有侵权请联系本人修改或删除，请大家多多支持原创!非常感谢！
简介&emsp;&emsp;Android 是一种基于 Linux 的开放源代码软件栈，为各类设备和机型而创建。

&emsp;&emsp;Android 平台的基础是Linux内核。例如，Android Runtime(ART)依靠Linux内核来执行底层功能，例如线程和底层内存管理。
Linux 内核
硬件抽象层(HAL)

HAL提供标准界面，向更高级的Java API 框架显示设备硬件功能。


Android Runtime

对于运行在Android 5.5(API 21)以上的设备，每个应用都有自己的ART实例并在其自己的进程中运行。
ART编写为通过执行DEX文件在低内存上运行多个虚拟机。
ART的功能包括
预先AOT和及时JIT，编译优化 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/12/01/AndroidTV%E9%81%A5%E6%8E%A7%E4%BB%A5%E5%8F%8A%E5%8D%8F%E8%AE%AE%E6%B5%85%E6%9E%90/" title="AndroidTV遥控以及协议浅析">AndroidTV遥控以及协议浅析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-12-01T01:51:09.000Z" title="发表于 2023-12-01 09:51:09">2023-12-01</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-22T09:41:40.917Z" title="更新于 2024-01-22 17:41:40">2024-01-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/AndroidTV/">AndroidTV</a></span></div><div class="content">
前言
失之东隅，收之桑榆



参考文章
android 红外遥控器实现原理
Android红外及蓝牙遥控器适配流程

&emsp;&emsp;本文中的所有内容大部分来源于网络资料，如有侵权请联系本人修改或删除，请大家多多支持原创!非常感谢！
1. 海思红外遥控
adb 调试相关命令
cat &#x2F;proc&#x2F;bus&#x2F;input&#x2F;devices 查看input设备
dumpsys input 查看input设备
gatevent -l 查看输入event事件



1.1 遥控器逻辑过程以及源码分析
逻辑过程
从xml中获取物理键值，配对解析
linux的标准键值
自定义的字符串
定义这个字符串
android标准键值
android键值上报
按键事件处理



1.1.1 协议相关
涉及模块
device&#x2F;hisilicon&#x2F;bigfish&#x2F;sdk&#x2F;source&#x2F;msp&#x2F;drv&#x2F;ir&#x2F;ir_s2
device&#x2F;hisilicon&#x2F;bigfish&#x ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/11/27/AndroidTv%E9%81%A5%E6%8E%A7%E6%A8%A1%E6%8B%9F%E5%99%A8app/" title="AndroidTv遥控模拟器app">AndroidTv遥控模拟器app</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-27T13:24:33.000Z" title="发表于 2023-11-27 21:24:33">2023-11-27</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-11-28T03:58:58.764Z" title="更新于 2023-11-28 11:58:58">2023-11-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/AndroidTV/">AndroidTV</a></span></div><div class="content">


前言
不要让时代的悲哀成为你的悲哀。



AndroidTv遥控模拟器app&emsp;&emsp;由于公司是做机顶盒开发的，经常需要定制客户的遥控功能，遥控的系统码那么多，又不可能全部都购买一个遥控器，或者让客户邮寄过来进行配置(主要是验证遥控码值的功能)，由于自己刚开始配不熟悉，有时候还因为修改了Key值，导致经常配错，又懒得去找遥控验证(实在不好找)，想到手机也有红外功能，能不能用手机来模拟波形，实现模拟遥控发射的波形，来检测自己的遥控是否正确，正好当时也在研究AndroidTV系统源码中如何适配SONY的遥控器，所以就开发了这个app。这里简单记录一下，软件是年初的时候做的。
&emsp;&emsp;目前所支持的协议就三种，NEC,SONY,SAMSUNG。下面先简单介绍一下这三种协议以及波形(当时示波器自己倒是全部捕捉过，更换了电脑系统，没及时记录)。
1.NEC协议
参考文章
NEC红外传输协议详解（含代码）
红外协议 IR NEC 协议深度解析-简单易懂协议详解



&emsp;&emsp;NEC协议是现在比较常用的协议，也是最简单的协议。红外接受管有3个脚，一 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/11/24/Android%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BD%91%E7%BB%9C%E6%A1%86%E6%9E%B6%E5%B0%81%E8%A3%85-Java/" title="Android第三方网络框架封装-Java">Android第三方网络框架封装-Java</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-24T06:42:57.000Z" title="发表于 2023-11-24 14:42:57">2023-11-24</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-24T05:41:15.975Z" title="更新于 2024-01-24 13:41:15">2024-01-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="content">Android第三方网络框架封装-Java
参考文章&#x2F;博主
苏火火
Android进阶： 详解OkHttp+Retrofit+Rxjava实现网络请求
RxJava2+Retrofit2+OkHttp3的基础、封装和项目中的使用



&emsp;&emsp;本文中的所有内容大部分来源于网络资料，如有侵权请联系本人修改或删除，请大家多多支持原创!非常感谢！
1. 概述&emsp;&emsp;在Android开发中，网络请求是必不可少的一环。最近做了一个需求，类似于应用宝的功能，需要从服务器获取数据，然后展示到界面上。并下载apk文件，实现静默安装。本篇主要介绍自己是如何使用Rxjava、Retrofit、Okhttp等框架，实现网络请求和下载apk的功能。
1.1 OKHttp&emsp;&emsp;OkHttp是一个用于处理HTTP请求的开源Java库，由Square公司开发。对于网络框架，更多的人会想到volley，volley是Android系统自带的网络请求框架。但是volle在Android 5.0之后被Google抛弃了，所以OkHttp逐渐成为Android开发 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/11/11/AndroidTv%E9%83%A8%E5%88%86%E9%A1%B5%E9%9D%A2%E6%8C%89%E9%94%AE%E9%9F%B3%E6%97%A0%E6%95%88/" title="AndroidTv部分页面按键音无效">AndroidTv部分页面按键音无效</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-11T15:24:09.000Z" title="发表于 2023-11-11 23:24:09">2023-11-11</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-11-12T02:10:27.226Z" title="更新于 2023-11-12 10:10:27">2023-11-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="content">

Android Tv 部分页面按键音无效，dispatchKeyEvent分发被拦截&emsp;&emsp;开始阅读之前，可以简单了解一下这些大佬的文章。  

c枫_撸码的日子  
Android 按键处理一 （基础知识）
Android 按键处理二 （按键流程之内核层篇）
Android 按键处理三 （按键流程之framework）


空杯的境界
Android 按键事件(KeyEvent)的分发机制


小羊子说
Android TV中按键事件和焦点处理总结


圆周率X
Android dispatchKeyEvent事件分发详解，简单易懂



问题描述&emsp;&emsp;接入喇叭，进入应用，突然发现一些页面有系统调用的按键提示音，而有些页面则没有。(最终发现是使用了Scrollview出的bug)
问题分析&emsp;&emsp;既然按键声音没有发出，那首先需要了解一下按键声音是怎么发出的。当用户注册了clickListener，则调用发出playSoundEffect()和响应用户写好的onClick()方法。首先排除系统设置声音无效。可以使用adb命令 adb ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/11/11/RecyclerView%E5%92%8CListView%E7%9A%84%E7%BC%93%E5%AD%98%E5%A4%8D%E7%94%A8%E6%9C%BA%E5%88%B6/" title="RecyclerView和ListView的缓存复用机制">RecyclerView和ListView的缓存复用机制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-11T03:30:12.000Z" title="发表于 2023-11-11 11:30:12">2023-11-11</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-22T09:40:28.410Z" title="更新于 2024-01-22 17:40:28">2024-01-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="content">

背景&emsp;&emsp;Android对于列表View的渲染和使用，常用的控件为ListView和RecyclerView。
适配器使用ListView123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657public class WifiAdapter extends ArrayAdapter&lt;ScanResult&gt; &#123;    public WifiAdapter(Context context, int resource, List&lt;ScanResult&gt; objects) &#123;        super(context, resource, objects);    &#125;    /**     * 获取适配器控件中的View对象，得到用于展示数据的视图 int position,：当前item的下标 View convertView,     * 表示可复用的View  ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/12/31/%E7%A6%BB%E5%88%AB2022/" title="离别2022">离别2022</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-12-31T15:59:59.000Z" title="发表于 2022-12-31 23:59:59">2022-12-31</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T03:30:53.672Z" title="更新于 2024-01-30 11:30:53">2024-01-30</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E4%BA%BA%E7%94%9F/">人生</a></span></div><div class="content">第一行代码 Android 第2版 郭霖著
第1章 开启启程——你的第一行Android代码
第2章 先从看得到的入手——探究活动
第3章 软件也要拼脸蛋——UI开发的点点滴滴
第4章 手机平板要兼顾——探究碎片
第5章 全局大喇叭——详解广播机制
第6章 数据存储全方案——详解持久化技术
第7章 跨程序共享数据——探究内容提供器
第8章 丰富你的程序——运用手机多媒体
第9章 看看精彩的世界——使用网络技术
第10章 后台默默的劳动者——探究服务
第11章 Android特色开发——基于位置的服务
第12章 最佳的UI体验——MaterialDesign实战
第13章 继续进阶——你还应该掌握的高级技巧
第14章 进入实战——开发酷欧天气
第15章 最后一步——将应用发布到360应用商店

总结&emsp;&emsp;观看郭老师的第一行代码书籍，始于7月终于12月。从一个懵懂无知的Android小白，如今总算入了门。恰逢2023年元旦来临之际，感触颇多。&emsp;&emsp;还记得刚接触Android时配置环境的手忙脚乱，踩了很多坑。比如jdk、gradle、gradle plug ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/10/21/Unity%E5%AD%A6%E4%B9%A0%E4%B9%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" title="Unity学习之生命周期">Unity学习之生命周期</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-10-21T04:53:29.000Z" title="发表于 2021-10-21 12:53:29">2021-10-21</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-29T05:14:26.427Z" title="更新于 2024-07-29 13:14:26">2024-07-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Unity/">Unity</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="content">

Unity 生命周期函数
Unity 3D 中的生命周期函数
生命周函数：需要继承 MonoBehaviour 类才能使用。生命周期函数全部都是由系统定义好的，系统会自动调用，且调用顺序与在代码中的书写顺序无关
常用的生命周期函数Awake(): 唤醒事件，游戏一开始运行就执行，只执行一次。
OnEnable(): 启用事件，只执行一次，当脚本组件被启用的时候执行一次。
Start(): 开始事件，执行一次。
FiexdUpdate(): 固定更新事件，执行N次，每物理帧(0.02s)执行一次。所有物理相关的更新都在这个事件中处理。
**Update()**： 更新事件，执行N次，每帧执行一次。
LateUpdate(): 稍后更新事件，执行N次，在Update()事件执行完毕后在再执行。
OnGUI(): GUI渲染事件，执行N次，执行的次数是Update()事件的两倍。
OnDisable(): 禁用事件，执行一次。在OnDestory()事件前执行。或者当该脚本组件被”禁用”后，也会出发该事件。
OnDestory(): 销毁事件，执行一次。当脚本所挂载的游戏物体被销毁时执行 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/zj970/resource/personal/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zj970</div><div class="author-info__description">谢谢你在世界的角落找到我</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/zj970"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎添加我的qq3060529292一起交流学习</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/17/%E8%91%AC%E9%80%81%E7%9A%84%E8%8A%99%E8%8E%89%E8%8E%B2/" title="葬送的芙莉莲">葬送的芙莉莲</a><time datetime="2024-11-17T11:57:06.000Z" title="发表于 2024-11-17 19:57:06">2024-11-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/10/03/%E5%A4%9C%E7%94%9F%E6%B4%BB/" title="夜生活">夜生活</a><time datetime="2024-10-02T19:11:31.000Z" title="发表于 2024-10-03 03:11:31">2024-10-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/17/Android%E4%B9%8BApk%E4%BC%98%E5%8C%96/" title="Android之Apk优化">Android之Apk优化</a><time datetime="2024-08-17T02:13:16.000Z" title="发表于 2024-08-17 10:13:16">2024-08-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/16/IDEA%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%96%B0/" title="IDEA开发配置更新">IDEA开发配置更新</a><time datetime="2024-05-16T14:21:49.000Z" title="发表于 2024-05-16 22:21:49">2024-05-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/11/Handler%E9%80%9A%E4%BF%A1%E6%9C%BA%E5%88%B6/" title="Handler通信机制">Handler通信机制</a><time datetime="2024-03-11T15:38:22.000Z" title="发表于 2024-03-11 23:38:22">2024-03-11</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/"><span class="card-category-list-name">Android</span><span class="card-category-list-count">10</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/AndroidTV/"><span class="card-category-list-name">AndroidTV</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Framework/"><span class="card-category-list-name">Framework</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Unity/"><span class="card-category-list-name">Unity</span><span class="card-category-list-count">2</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E4%BA%BA%E7%94%9F/" style="font-size: 1.3em; color: #99a1ac">人生</a> <a href="/tags/%E5%8E%9F%E5%88%9B/" style="font-size: 1.1em; color: #999">原创</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 1.5em; color: #99a9bf">笔记</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><span class="card-archive-list-count">4</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">21</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-11-17T13:46:28.625Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By zj970</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'forest'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>